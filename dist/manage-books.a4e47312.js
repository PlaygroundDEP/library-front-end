const btnNewBook=document.querySelector("#btn-new-book"),frmBook=document.querySelector("#frm-book"),txtISBN=document.querySelector("#txt-isbn"),txtName=document.querySelector("#txt-name"),txtAuthor=document.querySelector("#txt-author"),btnBrowse=document.querySelector("#btn-browse"),btnRemove=document.querySelector("#btn-remove"),txtPreview=document.querySelector("#txt-preview"),divThumbnail=document.querySelector("#thumbnail"),paginationElm=document.querySelector("#pagination"),tblBooks=document.querySelector("table"),btnSave=document.querySelector("#btn-save"),btnClear=document.querySelector("#btn-clear");let blobURL=null;function setEnableForm(t=!0){for(const e of frmBook.elements)(e instanceof HTMLInputElement||e instanceof HTMLButtonElement)&&(e.disabled=!t)}function checkValidityOfISBN(){return/^\d+$/.test(txtISBN.value)}function checkValidityOfName(){return/^.+$/.test(txtName.value)}function checkValidityOfAuthor(){return/^[A-Za-z ]+$/.test(txtAuthor.value)}function checkValidity(t){t.target.classList.remove("is-valid","is-invalid"),t.target===txtISBN?checkValidityOfISBN()?txtISBN.classList.add("is-valid"):txtISBN.classList.add("is-invalid"):t.target===txtName?checkValidityOfName()?txtName.classList.add("is-valid"):txtName.classList.add("is-invalid"):checkValidityOfAuthor()?txtAuthor.classList.add("is-valid"):txtAuthor.classList.add("is-invalid")}frmBook.addEventListener("reset",(()=>{const t=[txtISBN,txtName,txtAuthor];t.forEach((t=>t.classList.remove("is-valid","is-invalid"))),t[0].focus(),divThumbnail.style.backgroundImage="",tblBooks.querySelectorAll("tr").forEach((t=>t.classList.remove("selected"))),btnRemove.click(),btnSave.innerText="SAVE"})),frmBook.addEventListener("submit",(t=>{if(t.preventDefault(),"EDIT"===btnSave.innerText)return setEnableForm(),btnSave.innerText="SAVE",void(btnRemove.disabled=!divThumbnail.style.backgroundImage);const e=[txtISBN,txtName,txtAuthor].filter((t=>!t.classList.contains("is-valid")));return e.length>0?(e.forEach((t=>t.classList.add("is-invalid"))),void e[0].focus()):void 0})),btnBrowse.addEventListener("click",(()=>txtPreview.click())),txtPreview.addEventListener("input",(()=>{txtPreview.files[0]&&(blobURL&&URL.revokeObjectURL(blobURL),blobURL=URL.createObjectURL(txtPreview.files[0]),divThumbnail.style.backgroundImage=`url(${blobURL})`,btnRemove.disabled=!1)})),btnRemove.addEventListener("click",(()=>{txtPreview.value="",blobURL&&URL.revokeObjectURL(blobURL),divThumbnail.style.backgroundImage="",btnRemove.disabled=!0})),setEnableForm(!1),btnNewBook.addEventListener("click",(()=>{setEnableForm(),btnRemove.click(),frmBook.reset(),txtISBN.focus()})),txtISBN.addEventListener("input",checkValidity),txtName.addEventListener("input",checkValidity),txtAuthor.addEventListener("input",checkValidity);const pageSize=5;let booksCount=55,activePage=1;function initPagination(t=1){let e=Math.ceil(booksCount/5);(t<1||t>e)&&(t=e),activePage=t;let i=t+4,a=t-5;i>e&&(a-=i-e,i=e),a<1&&(i+=1-a,i>e&&(i=e),a=1);let n='<li class="page-item"><a class="page-link" href="#">&laquo;</a></li>';for(let e=a;e<=i;e++)n+=`<li class="page-item ${e===t?"active":""}"><a class="page-link" href="#">${e}</a></li>`;n+='<li class="page-item"><a class="page-link" href="#">&raquo;</a></li>',paginationElm.innerHTML=n}initPagination(),paginationElm.addEventListener("click",(t=>{let e=t.target;"A"===e.tagName&&("«"===e.innerText?initPagination(--activePage):"»"===e.innerText?initPagination(++activePage):initPagination(+e.innerText),t.stopPropagation())})),tblBooks.querySelector("tbody").addEventListener("click",(t=>{if(t.target.classList.contains("trash")||t.target.classList.contains("fa-trash")){t.stopPropagation();const e=t.target.closest("tr"),i=e.querySelector(".isbn").innerText;Swal.fire({title:"Confirm?",text:`Are you sure to delete the ${i}?`,icon:"question",confirmButtonText:"Yes",denyButtonText:"No",showDenyButton:!0}).then((t=>{t.isConfirmed&&(frmBook.reset(),e.remove())}))}console.log("working")})),tblBooks.querySelector("tbody").addEventListener("click",(t=>{const e=t.target.closest("tr");tblBooks.querySelectorAll("tr").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected");const i=e.querySelector(".isbn").innerText.replace("ISBN:",""),a=e.querySelector(".book-name").innerText,n=e.querySelector(".book-author").innerText,o=e.querySelector(".book-preview");txtISBN.classList.add("is-valid"),txtName.classList.add("is-valid"),txtAuthor.classList.add("is-valid"),txtISBN.value=i,txtName.value=a,txtAuthor.value=n,divThumbnail.style.backgroundImage=o.style.backgroundImage,setEnableForm(!1),btnSave.disabled=!1,btnClear.disabled=!1,btnSave.innerText="EDIT"}));
//# sourceMappingURL=manage-books.a4e47312.js.map
